<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <title>writing</title>
</head>
<body>
<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã€å§‹ã€‘ -->
<header class="text-gray-600 body-font">
    <div class="container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center">
      <a class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-10 h-10 text-white p-2 bg-red-500 rounded-full" viewBox="0 0 24 24">
          <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
        </svg>
        <a href="index.html"><span class="ml-3 text-xl font-bold">Language Master</span></a>
      </a>
      <nav class="md:ml-auto md:mr-auto flex flex-wrap items-center text-base justify-center">
        <a class="mr-5 hover:text-gray-900">Listning</a>
        <a class="mr-5 hover:text-gray-900 text-red-500">Writing</a>
        <a href="JLPT5-4.html" class="mr-5 hover:text-gray-900">Reading</a>
        <a class="mr-5 hover:text-gray-900">Speaking</a>
      </nav>
      <button class="inline-flex items-center bg-gray-100 border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base mt-4 md:mt-0"><meta name="google-translate-customization" content="xx">è¨€èªåˆ‡ã‚Šæ›¿ãˆ</meta>
        <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-1" viewBox="0 0 24 24">
          <path d="M5 12h14M12 5l7 7-7 7"></path>
        </svg>
      </button>
    </div>
  </header>
<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã€çµ‚ã€‘ -->

<!-- ãƒ¡ã‚¤ãƒ³ã€å§‹ã€‘ -->
<div class="sm:flex">
    <section class="text-center  w-full sm:w-1/4 p-2">
        <h2>Q What is the Japanese-Language<br>Proficiency Test?</h2><br>
        <div>
        <a href="https://www.jlpt.jp/e/about/purpose.html"><button class="inline-flex items-center bg-gray-100 border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base mt-4 md:mt-0 w-60"><h2 class="">Objective and History</h2></button></a>
        <h2 class="font-bold"><a href="https://www.jlpt.jp/e/about/merit.html"><button class="inline-flex items-center bg-gray-100 border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base mt-4 md:mt-0 w-60">Advantage of JLPT</button></a></h2>
       
        <h2 class="font-bold"><a href="https://www.jlpt.jp/e/about/points.html"><button class="inline-flex items-center bg-gray-100 border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base mt-4 md:mt-0 w-60">Four Key Characteristics</button></a></h2>
        
        <h2 class="font-bold"><a href="https://www.jlpt.jp/e/about/levelsummary.html"><button class="inline-flex items-center bg-gray-100 border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base mt-4 md:mt-0 w-60">N1~N5:Summary</button></a></h2>
        </div>
        <h2 class="font-bold"></h2><br>
        
        <h2 class="font-bold text-red-500">Test Dates</h2>
        <ul>
            <li><p>First test</p><p>Sunday, July2, 2023</p></li><br>
            <li><p>Second test</p><p>Sunday, December3, 2023</p></li>
        </ul>
        
    </section>

<!-- å³å´ã®ãƒ¡ã‚¤ãƒ³ -->
<section class="justify-center h-screen flex flex-wrap w-full p-2 sm:border-t-0 border-t-4 sm:border-l-4 border-slate-200">
    <ul>
        <li>
          <div id="js-slide">
            <img src="imgs/japan_sp.png" alt="">
            <img src="imgs/japan_s.png" alt="">
            <img src="imgs/japan_a.png" alt="">
            <img src="imgs/japan_w.png" alt="">
          </div>
        </li><br>

        <li>
            <main>
                <h1 class="text-center">JLPT5ï½4<br>æ¼¢å­—ã‚’æ—¥æœ¬èªã«ã—ã¦ãã ã•ã„</h1><br>
                <h2 class="text-center font-bold text-2xl" id="question">ã“ã“ã«å•é¡Œè¡¨ç¤º</h2><br>
            
            <div class="text-center">
                <div class>å›ç­”ï¼š<input type="text" id="uname" class="border-solid border-2 border-indigo-600 mr-4 border-solid"><button id="send" class="bg-blue-500 hover:bg-blue-700 text-white px-2 py-1">é€ä¿¡</button> </div><br>
                <!-- <div>
                    <textarea id="text" cols="30" rows="10" class="bg-blue-100"></textarea>
                    <button id="send">é€ä¿¡</button>
                </div> -->
                <div class="border-slate-200" id="output" style="overflow: auto; height: 300px;"></div>
            </div>
            </main>

        </li>


</section>
<!-- ãƒ¡ã‚¤ãƒ³ã€çµ‚ã€‘ -->

<!-- jQueryã®ã‚³ãƒ¼ãƒ‰ã‚’å…ˆã«èª­ã¿è¾¼ã‚€ -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- Firebase -->
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
    import { getDatabase, ref, push, set, update, onChildAdded, remove, onChildRemoved, onChildChanged } 
    from "https://www.gstatic.com/firebasejs/10.6.0/firebase-database.js";
    
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAlREHZI7RJZDDzxFUNWaHcc8WY7ekYtXk",
      authDomain: "sample-4dfae.firebaseapp.com",
      projectId: "sample-4dfae",
      storageBucket: "sample-4dfae.appspot.com",
      messagingSenderId: "1056760086016",
      appId: "1:1056760086016:web:8a2afa3f10db6ed170e2e5"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);//firebaseconfigã«ã‚­ãƒ¼æƒ…å ±ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§æ¥ç¶šã™ã‚‹
    const db = getDatabase(app);//ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
    const dbRef = ref(db,"chat");//ã©ã“ã®éšå±¤ã«ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹,chat/memo1/exsampleã¨ã‹

    // ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼
const slides = $("#js-slide").find("img");
const slideLength = slides.length;

let now = 0;
let next = 1;

const fade = 0;
const show = 100000;

slides.hide();
slides.eq(0).show();

const slidesshow = () => {

  slides.eq(now % slideLength).fadeOut(fade).removeClass("zoom");
  slides.eq(next % slideLength).fadeIn(fade).addClass("zoom");

  now++;
  next++;
};

setInterval(slidesshow, show);
// ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼

// ã‚¯ã‚¤ã‚ºã®ãƒªã‚¹ãƒˆ
    let question =[
    [
        "æ–°ã—ã„",
        "ã‚ãŸã‚‰ã—ã„"
    ],

    [
        "ã‚ãŸã—ã®å¼Ÿ",
        "ã‚ãŸã—ã®ãŠã¨ã†ã¨"
    ],

    [
        "ã‚¢ãƒ³ãƒˆãƒ‹ã‚ªçŒªæœ¨",
        "ã‚¢ãƒ³ãƒˆãƒ‹ã‚ªã„ã®ã"
    ],

    [
        "ç§ã®å®Ÿå®¶ã¯èŒ¶é‡œã§ã™",
        "ã‚ãŸã—ã®ã˜ã£ã‹ã¯ã¡ã‚ƒãŒã¾ã§ã™"
    ],

    [
        "æ˜¥é¢¨äº­ãƒ™ã‚¤ãƒ–ãƒ¬ãƒ¼ãƒ‰ã§ã™",
        "ã—ã‚…ã‚“ã·ã†ã¦ã„ãƒ™ã‚¤ãƒ–ãƒ¬ãƒ¼ãƒ‰ã§ã™"
    ]

];  

var quize = document.getElementById("question");

let correct = 0;
let quizCnt = 0;//ã‚«ã‚¦ãƒ³ãƒˆç”¨ã®å¤‰æ•°ã‚’ä½œæˆ

function quizeSet(){ //ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ
    quize.textContent = question[quizCnt][0];//ã‚¯ã‚¤ã‚ºã®ã‚¯ã‚¤ã‚ºã‚«ã‚¦ãƒ³ãƒˆã®0ç•ªç›®ã‚’å‘¼ã³å‡ºã™
}

quizeSet();

// ãƒ‡ãƒ¼ã‚¿ç™»éŒ²
$("#send").on("click",function(){
    const msg = {
     uname : $("#uname").val(),//unameã®å€¤ã‚’ã¨ã£ã¦ãã‚‹
     text : "ãƒ†ã‚¹ãƒˆ"//textã®å€¤ã«ç©ºã‚’ã„ã‚Œã‚‹
    }
    

    // $("#uname").val("");
    // $("#text").val("");

    if(msg.uname == question[quizCnt][1]){
        alert("æˆåŠŸï¼");
        var music = new Audio("sound/correct001.mp3");
        music.play();
        correct++;
        msg.text="æ­£è§£"
        const newPostRef = push(dbRef);//ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚­ãƒ¼ã‚’ç”Ÿæˆ
        set(newPostRef,msg); //ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚­ãƒ¼ã¨ã¨ã‚‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
        
    }else{
        alert("ã¦ã¸ãºã‚å¤§é­”ç‹");
        var music = new Audio("sound/bell20.mp3");
        music.play();
        msg.text="ä¸æ­£è§£"
        const newPostRef = push(dbRef);//ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚­ãƒ¼ã‚’ç”Ÿæˆ
        set(newPostRef,msg); //ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚­ãƒ¼ã¨ã¨ã‚‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
    }

    quizCnt++;

    if(quizCnt == question.length){
        quize.textContent = `æ­£è§£æ•°ã¯ ${correct}/${quizCnt} ã§ã—ãŸï¼`;

    }else{
        quizeSet();
    }

});




// firebaseã«å…¥ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚‚ã‚‰ã„è¡¨ç¤º
onChildAdded(dbRef,function (data) {
    const msg = data.val();//firebaseã®é–¢æ•°
    const key = data.key;//ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚­ãƒ¼ã‚’å–å¾—ã€å‰Šé™¤ãƒ»æ›´æ–°ã«å¿…é ˆ
    let h = '<p id="'+ key +'">';
        h += msg.text;
        h += '<br>';
        h += '<span contentEditable="true" id="'+ key +'_update">'+ msg.uname+'</span>';
        h += '<span class ="remove" data-key="'+ key +'">ğŸš®</span>'
        h += '<span class ="update" data-key="'+ key +'">ğŸ†™</span>'
        h += '<p>';
        $("#output").prepend(h);
});

// å‰Šé™¤ã‚¤ãƒ™ãƒ³ãƒˆ
$("#output").on("click", ".remove", function(){
    const key = $(this).attr("data-key");
    const remove_item = ref(db,"chat/"+key);
    remove(remove_item); //Firebaseãƒ‡ãƒ¼ã‚¿å‰Šé™¤é–¢æ•°
});

// æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆ
$("#output").on("click",".update",function(){
    const key =$(this).attr("data-key");
    update(ref(db,"chat/"+key),{
        text: $("#"+key+'_update').html()
        });
});

// å‰Šé™¤å‡¦ç†ãŒFirebaseå´ã§å®Ÿè¡Œã•ã‚ŒãŸã‚‰ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿï¼
onChildRemoved(dbRef,(data)=>{
    $("#" + data.key).remove();
});

// æ›´æ–°å‡¦ç†ãŒFirebaseå´ã§ç™ºç”Ÿã—ãŸã‚‰ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿï¼
onChildChanged(dbRef,(data)=>{
    $("#"+data.key+'_update').html(data.val().text);
    $("#"+data.key+'_update').fadeOut(800).fadeIn(800);
});
</script>



</body>
</html>